<!-- Agrega estas líneas en la etiqueta <head> -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.4/Chart.min.js"></script>

<!-- Agrega esta sección antes de la etiqueta </body> para incluir el modal de conexión de la billetera y la rueda -->
<div id="modal" class="hidden w-full h-full top-0 left-0 fixed flex items-center justify-center bg-gray-900/50">
  <div class="bg-white rounded-xl p-8 text-black">
    <h2 class="text-xl font-semibold">Conecta tu billetera</h2>
    <button id="connectButton" class="mt-2 bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full">Conectar</button>
  </div>
</div>

<!-- Contenedor de la rueda -->
<div id="wheel-of-fortune" class="hidden fixed h-screen w-screen top-0 left-0" style="background-color: rgba(0,0,0,0.7)"></div>

<script>
// Agrega estas líneas para incluir datos deChart.js en el script
let wheelCanvasContext = null;

window.onload = () => {
  wheelOfFortuneInit();
}

function wheelOfFortuneInit() {
  const canvas = document.getElementById("wheel-of-fortune");
  wheelCanvasContext = canvas.getContext("2d");

  const centerX = canvas.width / 2;
  const centerY = canvas.height / 2;
  const radius = Math.min(centerX, centerY);

  wheelCanvasContext.beginPath();
  wheelCanvasContext.arc(centerX, centerY, radius, 0, Math.PI * 2, false);
  wheelCanvasContext.fillStyle = "white";
  wheelCanvasContext.fill();
  wheelCanvasContext.closePath();

  wheelCanvasContext.font = "bold 12px Arial";
  wheelCanvasContext.textAlign = "center";
  wheelCanvasContext.fillStyle = "black";
  wheelCanvasContext.fillText(" Rueda de la Fortuna", centerX, centerY + 40);
}

// Agrega estas líneas al final del script
function showModal() {
  document.getElementById("modal").classList.remove("hidden");
}

function hideModal() {
  document.getElementById("modal").classList.add("hidden");
}

document.getElementById("connectButton").addEventListener("click", () => {
  hideModal();
  showWheelOfFortune();
});

function showWheelOfFortune() {
  document.getElementById("wheel-of-fortune").classList.remove("hidden");
  // Lógica para rotar el canvas y simular la rueda de la fortuna
  // Puedes ver un ejemplo de cómo hacerlo con Chart.js aquí: https://www.chartjs.org/docs/latest/samples/animations/rotate.html

  // ... Tu lógica de almacenamiento de premios aquí
}

document.getElementById("joinButton").addEventListener("click", (e) => {
  e.preventDefault();
  showModal();
});

function joinRoom(id) {
  // Lógica de unión a la sala más cercana a llenarse
  // …
}

// Dentro de la función joinRoom después de: if (newCount >= 200)
if (newCount >= 200) {
  // …
  setTimeout(() => {
    document.querySelector(`.room[data-id='${target.id}'] . participants`); // Selecciona elemento de texto de participantes en la sala
    showWheelOfFortune();
  }, 1000);
} else {
  // ...
}
</script>
